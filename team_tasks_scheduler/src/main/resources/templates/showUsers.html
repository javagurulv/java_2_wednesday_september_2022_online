<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns:form="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Tasks scheduler demo project">
    <meta name="author" content="JB, OK">
    <title>Tasks Scheduler</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>

<body>
<header>
    <section id="header">
        <img th:src="@{/images/scheduler_1.png}" alt="schedulerImg" width="100px" height="100px" />
        <h1>Tasks Scheduler</h1>
    </section>
    <section id="sub-header">
        <form action="/systemSettingsMenu" method="get">
            <input class="btn" type="submit" value="Go to settings menu" name="Submit" />
        </form>
    </section>
</header>

<main>
    <section id="msg-error">
        <td th:if="${errors != null}">
            <tr th:each="error : ${errors}">
                <td th:text="${error.field}" />
                <td> - </td>
                <td th:text="${error.message}" />
            </tr>
        </td>
    </section>

    <section id="form">
        <h3>Users data</h3>

<!--        <form action="/showUsers" method="get">-->
            <table>
                <tr>
                    <td>Username to filter by:</td>
                    <td><input type="text" id="username" name="username" th:value="${username}"/></td>
                </tr>
                <tr>
                    <td>E-mail to filter by:</td>
                    <td><input type="text" id="email" name="email" th:value="${email}"/></td>
                </tr>
            </table>
            <br>
<!--            <input class="btn" type="submit" value="Filter"/>-->
<!--            <a th:href="@{'/showUsers/page/' + ${currentPage} +-->
<!--                        '?orderBy=username&orderDir=' + ${reverseOrderDir} +-->
<!--                        '&username=' + document.getElementById('username').value +-->
<!--                        '&email=' + document.getElementById('email').value"}>-->
<!--                <button class="btn">Filter/button>-->
<!--            </a>-->
<!--            <a th:href="@{'/showUsers/page/' + ${currentPage} +-->
<!--                        '?orderBy=username&orderDir=' + ${reverseOrderDir} +-->
<!--                        '&username=' + document.getElementById('username').value +-->
<!--                        '&email=' + document.getElementById('email').value"}>-->
<!--                <input class="btn" type="submit" value="Filter"/>-->
<!--            </a>-->
<!--            <a th:href = "/showUsers/page/" onclick = "window.location=this.href + @{${currentPage} +-->
<!--                        '?orderBy=username&orderDir=' + ${reverseOrderDir} +-->
<!--                        '&username=' + document.getElementById('username').value +-->
<!--                        '&email=' + document.getElementById('email').value"}>-->
<!--                <button class="btn">Filter No Form</button>-->
<!--            </a>-->
<!--            <a th:href = "@{'/showUsers/page/' + ${currentPage} +-->
<!--                        '?orderBy=username&orderDir=' + ${orderDir} +-->
<!--                        '&username=' + ${document.getElementById('username').value} + '&email=' + ${email}}">-->
<!--                <button class="btn">Filter</button>-->
<!--            </a>-->
<!--            <input class="btn" type="reset" value="Clear"/>-->

            <table class="tbl-grid">
                <th class="tbl-header-ordering">
                    <a th:href="@{'/showUsers/page/' + ${currentPage} +
                    '?orderBy=username&orderDir=' + ${reverseOrderDir}}">
                        Username
                    </a>
                </th>
                <th class="tbl-header-ordering">
                    <a th:href="@{'/showUsers/page/' + ${currentPage} +
                    '?orderBy=email&orderDir=' + ${reverseOrderDir}}">
                        E-mail
                    </a>
                </th>
                <th>Send reminders</th>
                <td style="display:none;" th:if="${users != null}">
                    <tr th:each="user : ${users}">
                        <td th:text="${user.username}" />
                        <td th:text="${user.email}" />
                        <td th:text="${user.sendReminders}" />
                    </tr>
                </td>
            </table>
            <table class="tbl-grid-msg">
                <td th:if="${grid_msg != null}">
                    <tr><td th:text="${grid_msg}" /></tr>
                </td>
            </table>
<!--        </form>-->
        <div id="pagination" th:if = "${totalPages > 1}">
            Total Items: [[${totalItems}]] &nbsp; &nbsp; | &nbsp; &nbsp;
            <span>
                <a th:if="${currentPage != 1}" th:href="@{'/showUsers/page/1' +
                 '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">First</a>
                <span class="link-disabled" th:unless="${currentPage != 1}">First</span> &nbsp; &nbsp;
            </span>
            <span>
                <a th:if="${currentPage > 1}" th:href="@{'/showUsers/page/' + ${currentPage - 1} +
                '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">Previous</a>
                <span class="link-disabled" th:unless="${currentPage > 1}">Previous</span> &nbsp; &nbsp;
            </span>
            <span>
                <th:block th:if="${totalPages <= 6}">
                    <span th:each="i: ${#numbers.sequence(1, totalPages)}">
                        <a th:if="${currentPage != i}" th:href="@{'/showUsers/page/' + ${i} +
                        '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">[[${i}]]</a>
                        <span class="link-disabled" th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                    </span>
                </th:block>
                <th:block th:if="${totalPages > 6}">
                    <th:block th:if="${currentPage <= 3 || currentPage >= totalPages - 2}">
                        <span th:each="i: ${#numbers.sequence(1, 3)}">
                            <a th:if="${currentPage != i}" th:href="@{'/showUsers/page/' + ${i} +
                             '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">[[${i}]]</a>
                            <span class="link-disabled" th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                        </span>

                        <a th:href="@{'/showUsers/page/' + 4 +
                        '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">...</a> &nbsp; &nbsp;

                        <span th:each="i: ${#numbers.sequence(totalPages - 2, totalPages)}">
                            <a th:if="${currentPage != i}" th:href="@{'/showUsers/page/' + ${i} +
                            '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">[[${i}]]</a>
                            <span class="link-disabled" th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                        </span>
                    </th:block>
                    <th:block th:if="${currentPage > 3 && currentPage < totalPages - 2}">
                        <a th:href="@{'/showUsers/page/' + ${currentPage - 3} +
                        '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">...</a> &nbsp; &nbsp;

                        <span th:each="i: ${#numbers.sequence(currentPage - 2, currentPage + 2)}">
                            <a th:if="${currentPage != i}" th:href="@{'/showUsers/page/' + ${i} +
                            '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">[[${i}]]</a>
                            <span class="link-disabled" th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                        </span>

                        <a th:href="@{'/showUsers/page/' + ${currentPage + 3} +
                        '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">...</a> &nbsp; &nbsp;
                    </th:block>
                </th:block>
            </span>
            <span>
                <a th:if="${currentPage < totalPages}" th:href="@{'/showUsers/page/' + ${currentPage + 1} +
                '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">Next</a>
                <span class="link-disabled" th:unless="${currentPage < totalPages}">Next</span> &nbsp; &nbsp;
            </span>
            <span>
                <a th:if="${currentPage < totalPages}" th:href="@{'/showUsers/page/' + ${totalPages} +
                '?orderBy=' + ${orderBy} + '&orderDir=' + ${orderDir}}">Last</a>
                <span class="link-disabled" th:unless="${currentPage < totalPages}">Last</span>
            </span>
        </div>
    </section>
</main>
</body>

</html>